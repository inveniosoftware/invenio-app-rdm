{#
    Copyright (C) 2020 CERN.
    Copyright (C) 2020 Northwestern University.

    Invenio RDM Records is free software; you can redistribute it and/or modify
    it under the terms of the MIT License; see LICENSE file for more details.
#}
{%- from "invenio_app_rdm/records/macros/creatibutors.html" import affiliations_accordion, show_creatibutors %}

{% if record.ui.contributors and record.ui.contributors.contributors %}
<hr class="thin-line"/>

<div class="contributors-section">
  <div class="ui grid contributors">
    <div class="row">
      <div class="sixteen wide column">
        <h2>Contributors</h2>
      </div>
    </div>
  {%- for group in record.ui.contributors.contributors|groupby('role.title')%}
    <div class="sixteen wide mobile eight wide tablet four wide computer column">
      <h3>{{group.grouper}}{%- if group.list|length > 1 -%}s{%- endif -%}</h3>
      {{ show_creatibutors(group.list, list_view=True, show_affiliations=True) }}
    </div>
  {%- endfor %}

  {% if record.ui.contributors.affiliations %}
    <div class="row">
      <div class="sixteen wide right aligned column">
        {{affiliations_accordion(record.ui.contributors.affiliations)}}
      </div>
    </div>
  {% endif %}
  </div>
</div>
{% endif %}
